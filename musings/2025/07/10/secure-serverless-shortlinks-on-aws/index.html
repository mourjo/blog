<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="shortcut icon" href="/blog/favicon.png"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Lora:ital,wght@0,400..700;1,400..700&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet"> <script src="/blog/js/search.js"> </script> <meta name="robots" content="index,noarchive,follow,max-image-preview:large"> <title>S3: Secure Serverless Shortlinks On AWS | Mourjo Sen</title> <meta property="og:site_name" content="Mourjo Sen's Blog"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2025-07-10 09:24:18 +0530"> <meta name="title" content="S3: Secure Serverless Shortlinks On AWS"> <meta property="og:title" content="S3: Secure Serverless Shortlinks On AWS"> <meta name="description" content="Inspiration is hard to come by in many fields â€“ but not so in software engineering. When I attended a course on AWS offerings last year, I decided to try it out myself. With a little bit of hard work, the result was a serverless URL shortener buil..."> <meta property="og:description" content="Inspiration is hard to come by in many fields â€“ but not so in software engineering. When I attended a course on AWS offerings last year, I decided to try it out myself. With a little bit of hard work, the result was a serverless URL shortener buil..."> <meta property="og:url" content="https://mourjo.me/blog/musings/2025/07/10/secure-serverless-shortlinks-on-aws/"> <meta property="al:web:url" content="https://mourjo.me/blog/musings/2025/07/10/secure-serverless-shortlinks-on-aws/"> <meta property="og:image" content="https://mourjo.me/resources/images/card.jpg"> <meta property="article:author" content="https://mourjo.me"> <meta name="author" content="Mourjo Sen"> <meta property="twitter:title" content="S3: Secure Serverless Shortlinks On AWS"> <meta name="twitter:site" content="@mourjo_sen"> <meta property="twitter:description" content="Inspiration is hard to come by in many fields â€“ but not so in software engineering. When I attended a course on AWS offerings last year, I decided to try it out myself. With a little bit of hard work, the result was a serverless URL shortener buil..."> <meta name="twitter:image:src" content="https://mourjo.me/resources/images/card.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:creator" content="@mourjo_sen"> <meta name="twitter:label1" content="Reading time"> <meta name="twitter:data1" content="5 min read"> <!-- Google tag (gtag.js) --> <script> // Only load on production environment. if (window.location.host !== 'mourjo.me') { window.goatcounter = {no_onload: true} } </script> <script data-goatcounter="https://stats.mourjo.me/count" async src="//stats.mourjo.me/count.js"></script> <link rel="stylesheet" href="/blog/css/sketch.css"> </script> </head> <body> <div class="page"> <div> <div class="header"> <a class="brand" href="https://mourjo.me/">Mourjo Sen</a> <a href="/blog/">Blog</a> &#124; <a href="/cv">CV</a> </div> </div> <div class="post"> <div class="searchbar-container"> <div class="search-container" id="search-container"> <input type="text" id="search-bar" class="search-bar" placeholder="ðŸ” Search"> <div class="search-results-container" id="search-results"></div> </div> </div> <main> <article> <script src="https://giscus.app/client.js" data-repo="mourjo/blog" data-repo-id="MDEwOlJlcG9zaXRvcnk2ODE2OTIzNQ==" data-category="General" data-category-id="DIC_kwDOBBAuE84Cmw3O" data-mapping="og:title" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async> </script> <h1 class="post-headline">S3: Secure Serverless Shortlinks On AWS</h1> <p class="copy"> July 10, 2025 </p> <p>Inspiration is hard to come by in many fields â€“ but not so in software engineering. When I attended a course on AWS offerings last year, I decided to try it out myself. With a little bit of hard work, the result was a serverless URL shortener built on AWS called shortener called <a href="https://liliput.mourjo.me">Liliput</a>.</p> <p>A URL shortener is not an uncommon project but I wanted to focus specifically on:</p> <ul> <li><strong>Security</strong>: All operations in Liliput put security as a primary concern.</li> <li><strong>Atomicity</strong> with DyanamoDB for unique short links: DynamoDB supports <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithItems.html#WorkingWithItems.AtomicCounters">atomic counters</a>, that is used in the link generation logic</li> </ul> <p>The source code is on <a href="https://github.com/mourjo/liliput">Github</a>. The home screen looks like this:</p> <p><img src="/blog/images/2025-07-10-secure-serverless-shortlinks-on-aws-1.webp" alt="Image Description" /></p> <h2 id="what-liliput-does">What Liliput does</h2> <p>Liliput is a secure, serverless shortener of URLs with the following features:</p> <ul> <li>Logged-in users can create short links (like <a href="https://liliput.mourjo.me/l/G4LZ1a">liliput.mourjo.me/l/G4LZ1a</a>)</li> <li>Logged-in users can also view their previously created links</li> <li>Anonymous users can visit shortlinks</li> <li>All short links are unique to a user - if the same long link is shorted multiple times, the same short URL is returned</li> <li>Usage counts (expansion count) are tracked and displayed on the UI</li> <li>Links can be expanded at most 25 times to prevent illegitimate usage (spam and phishing)</li> <li>Verified users can create links that can be expanded unlimited times (verification process is through the source code)</li> </ul> <p>Here is <a href="https://www.youtube.com/watch?v=EzdWG2OjYpE">a video</a> that demoes the application.</p> <h2 id="focus-on-security">Focus on Security</h2> <p>This application is secure because of the following features:</p> <ul> <li>To create short links, you need a valid Google account</li> <li>Signing into Google uses the OAuth 2.0 with <a href="https://www.perplexity.ai/search/what-is-pkce-authentication-iipO5PXWQ.KvOOZvx_CQ7A">PKCE</a></li> <li>All cookies are<a href="https://raw.githubusercontent.com/mourjo/liliput/refs/heads/master/images/cookies.png"> HTTP-only</a> (Javascript cannot access it)</li> <li>Links can only be expanded 25 times to prevent misuse, unless the user is verified</li> <li>All APIs are rate limited and alerts for when rate limit is breached</li> </ul> <h2 id="system-design">System Design</h2> <p>The system is built using the following:</p> <ul> <li>DynamoDB for storage</li> <li>Amazon Cognito and Google Oauth for login flows</li> <li>Lambda functions for logic implementation (shown below)</li> <li>API gateway for mapping lambda functions to routes</li> <li>Authorizer in API gateway with another Lambda function</li> <li>Public DNS (<a href="https://liliput.mourjo.me">liliput.mourjo.me</a>) for APIs</li> </ul> <h4 id="logged-in-flows">Logged In Flows</h4> <p><img src="https://raw.githubusercontent.com/mourjo/liliput/refs/heads/master/images/flowchart_01_homepage.svg" /></p> <p><img src="https://raw.githubusercontent.com/mourjo/liliput/refs/heads/master/images/flowchart_02_create_link.svg" /></p> <h4 id="anonymous-flows">Anonymous Flows</h4> <p><img src="https://raw.githubusercontent.com/mourjo/liliput/refs/heads/master/images/flowchart_03_expand_link.svg" /></p> <h2 id="learnings">Learnings</h2> <ul> <li>Amazon Cognito integration with Google OAuth and managing login state in <a href="https://github.com/mourjo/liliput/blob/master/src/main/resources/index.html">a single-page Javascript</a> between the OAuth dance</li> <li>The authorizer middleware in API gateway with Lambda function</li> <li>Generating IAM policy document for giving access to only verified users</li> <li>Startup with Java based Lambda functions was quite slow</li> </ul> <h2 id="whats-next-for-liliput">Whatâ€™s next for Liliput</h2> <ul> <li>Verification without source code change</li> <li>Disable link expansions explicitly</li> <li>Switching between multiple Google accounts</li> <li>Searching for links shortened</li> </ul> <p class="copy"> See anything to improve? <a href="https://github.com/mourjo/blog/tree/master/_posts/2025-07-10-secure-serverless-shortlinks-on-aws.md">Edit this post</a>! </p> </article> <div class="giscus"></div> </main> <div class="footer"> <a href="/blog/">Blog</a> &#124; <a href="/cv">CV</a> </div> </div> </div> </body> </html>
